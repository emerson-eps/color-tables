import{j as V}from"./jsx-runtime-9dc53467.js";import{r as j}from"./index-76fb7be0.js";import{s as v,d as _,e as G,R as T,b as P,D as W}from"./constants-5003fa8a.js";function Y(l,i,s){function r(e){function y(){e.selectAll("g.legendCells").data(l).enter().append("g").append("rect").append("title").text(function(t){return t.name}).attr("class","rectLabel").style("cursor","pointer").style("pointer-events","all"),e.selectAll("rect").attr("height",1).attr("width",1).style("fill",function(t){return t.color}),s&&!i||s===!0&&i?e.selectAll("rect").attr("x",function(t,n){return n}).attr("y",0):!s&&!i||s===!1&&i?e.selectAll("rect").attr("y",function(t,n){return n}).attr("x",0):e.selectAll("rect").attr("x",function(t,n){return n}).attr("y",0)}y()}return r}const k=({discreteData:l,dataObjectName:i,colorName:s="Stratigraphy",horizontal:r,getColorScaleData:e,id:y,colorTables:t=P,legendFontSize:n,tickFontSize:O,numberOfTicks:E,legendScaleSize:o=200,cssLegendStyles:N=W})=>{const F=Math.ceil(Math.random()*9999).toString(),d=j.useRef(null);let a,u;return r?(u="30px",o<200?a=200:a=o):(a="50px",o<200?u=190:u=o-10),j.useEffect(()=>{d.current&&(v(d.current).select("div").remove(),v(d.current).select("svg").remove(),I());async function I(){let w,h=!1,A=[];const c=[];try{typeof t=="string"&&(w=await(await fetch(t)).json());const x=typeof t=="string"?_(s,w):_(s,t),U=_(s,G),H={discrete_1:[[],0],discrete_2:[[],1],discrete_3:[[],2],discrete_4:[[],3],discrete_5:[[],4],discrete_6:[[],5],discrete_7:[[],6],discrete_8:[[],7],discrete_9:[[],8],discrete_10:[[],9]};(!e||e.length===0)&&Object.entries(l||H).sort((b,g)=>b[1][1]-g[1][1]).forEach(b=>{const g=b[0],L=b[1][1];if(x.length>0){const m=x.find(R=>R[0]===L);m&&c.push({color:T(m).color,name:g}),A.push(g)}else{const m=U.find((R,M)=>M===L);m&&c.push({color:m})}}),e!=null&&e.color&&(e.color.forEach(f=>{c.push({color:T(f).color})}),h=!0),e!=null&&e.colorsObject&&(e.colorsObject.forEach(f=>{c.push({color:f})}),A=e.legendColorName,h=!0);const B=Y(c,h,r);let p;h?e!=null&&e.color?p=e.color.length:p=e.colorsObject.length:p=c.length;const q=v(d.current);q.append("div").text(i).style("color","grey").style("white-space","nowrap").style("overflow","hidden").style("width","150px").style("text-overflow","ellipsis").style("margin-bottom",r?"5px":"0px").style("font-size",n&&n>0?`${n}px`:"16px").style("transform",r?"none":"translate(-69px, 80px) rotate(270deg)"),q.style("margin",r?"5px 0px 0px 15px":"0px 5px 0px 5px").style("width",a).append("svg").call(B).attr("viewBox",r?`0 0 ${p} 1.5`:`0 0 2 ${p}`).attr("preserveAspectRatio","none").style("font-size",".4").style("margin-left",r?"0":"20px").attr("height",u).attr("width",r?o<200?190:o-10:"40px")}catch(x){console.error(x)}}},[l,s,t,r,e,i,n,O,E,o,a,u]),V("div",{style:{position:"absolute",minHeight:"70px",borderRadius:"5px",zIndex:999,margin:"10px",...N},children:V("div",{id:y||`disc-legend - ${F}`,ref:d})})};try{k.displayName="DiscreteColorLegend",k.__docgenInfo={description:"",displayName:"DiscreteColorLegend",props:{discreteData:{defaultValue:null,description:"Discrete data to build legend",name:"discreteData",required:!1,type:{name:"DiscreteCodes | { objects: DiscreteCodes; }"}},dataObjectName:{defaultValue:null,description:"Title for the legend",name:"dataObjectName",required:!1,type:{name:"string"}},colorName:{defaultValue:{value:"Stratigraphy"},description:"Name of the color(ex: Rainbow)",name:"colorName",required:!1,type:{name:"string"}},horizontal:{defaultValue:null,description:"Orientation for legend",name:"horizontal",required:!1,type:{name:"boolean"}},getColorScaleData:{defaultValue:null,description:`Used while using color selector component

Returns the object with name and array of colors`,name:"getColorScaleData",required:!1,type:{name:"any"}},id:{defaultValue:null,description:"ID",name:"id",required:!1,type:{name:"string"}},colorTables:{defaultValue:{value:"defaultColorTables as colorTablesArray"},description:`Prop containing color table data

Reference: https://github.com/emerson-eps/color-tables/blob/main/react-app/src/component/color-tables.json`,name:"colorTables",required:!1,type:{name:"string | colorTablesArray"}},legendFontSize:{defaultValue:null,description:"Font size of legend name (in px)",name:"legendFontSize",required:!1,type:{name:"number"}},tickFontSize:{defaultValue:null,description:"Font size of legend ticks (in px)",name:"tickFontSize",required:!1,type:{name:"number"}},numberOfTicks:{defaultValue:null,description:`Number of ticks in the main legend (only shown when isRangeShown prop is true)
This refers to the number between min and max range points`,name:"numberOfTicks",required:!1,type:{name:"number"}},legendScaleSize:{defaultValue:{value:"200"},description:"This prop controls the number of ticks shown on the scale of the color legend (in px)",name:"legendScaleSize",required:!1,type:{name:"number"}},cssLegendStyles:{defaultValue:{value:`{
  left: "0vw",
  top: "0vh",
  backgroundColor: "#A0A0A0aa",
  borderRadius: "5px",
}`},description:"css styles to be applied",name:"cssLegendStyles",required:!1,type:{name:"any"}}}}}catch{}export{k as D,Y as d};
//# sourceMappingURL=DiscreteLegend-e8c48839.js.map
