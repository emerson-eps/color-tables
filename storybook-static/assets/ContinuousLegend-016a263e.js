import{j as re}from"./jsx-runtime-095bf462.js";import{r as ae}from"./index-8db94870.js";import{s as K,d as Q,e as ie,f as W,R as C,l as Z,g as oe,h as se,b as ge}from"./legendCommonFunction-03fb4e75.js";function he(e,t,m){e=+e,t=+t,m=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+m;for(var l=-1,r=Math.max(0,Math.ceil((t-e)/m))|0,o=new Array(r);++l<r;)o[l]=e+l*m;return o}function xe(e){return e}var D=1,U=2,P=3,G=4,ue=1e-6;function be(e){return"translate("+e+",0)"}function ke(e){return"translate(0,"+e+")"}function we(e){return t=>+e(t)}function Ve(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),m=>+e(m)+t}function qe(){return!this.__axis}function ce(e,t){var m=[],l=null,r=null,o=6,p=6,g=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,f=e===D||e===G?-1:1,h=e===G||e===U?"x":"y",x=e===D||e===P?be:ke;function i(n){var j=l??(t.ticks?t.ticks.apply(t,m):t.domain()),E=r??(t.tickFormat?t.tickFormat.apply(t,m):xe),F=Math.max(o,0)+g,_=t.range(),s=+_[0]+c,I=+_[_.length-1]+c,N=(t.bandwidth?Ve:we)(t.copy(),c),L=n.selection?n.selection():n,y=L.selectAll(".domain").data([null]),b=L.selectAll(".tick").data(j,t).order(),q=b.exit(),A=b.enter().append("g").attr("class","tick"),w=b.select("line"),v=b.select("text");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(A),w=w.merge(A.append("line").attr("stroke","currentColor").attr(h+"2",f*o)),v=v.merge(A.append("text").attr("fill","currentColor").attr(h,f*F).attr("dy",e===D?"0em":e===P?"0.71em":"0.32em")),n!==L&&(y=y.transition(n),b=b.transition(n),w=w.transition(n),v=v.transition(n),q=q.transition(n).attr("opacity",ue).attr("transform",function(k){return isFinite(k=N(k))?x(k+c):this.getAttribute("transform")}),A.attr("opacity",ue).attr("transform",function(k){var d=this.parentNode.__axis;return x((d&&isFinite(d=d(k))?d:N(k))+c)})),q.remove(),y.attr("d",e===G||e===U?p?"M"+f*p+","+s+"H"+c+"V"+I+"H"+f*p:"M"+c+","+s+"V"+I:p?"M"+s+","+f*p+"V"+c+"H"+I+"V"+f*p:"M"+s+","+c+"H"+I),b.attr("opacity",1).attr("transform",function(k){return x(N(k)+c)}),w.attr(h+"2",f*o),v.attr(h,f*F).text(E),L.filter(qe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===U?"start":e===G?"end":"middle"),L.each(function(){this.__axis=N})}return i.scale=function(n){return arguments.length?(t=n,i):t},i.ticks=function(){return m=Array.from(arguments),i},i.tickArguments=function(n){return arguments.length?(m=n==null?[]:Array.from(n),i):m.slice()},i.tickValues=function(n){return arguments.length?(l=n==null?null:Array.from(n),i):l&&l.slice()},i.tickFormat=function(n){return arguments.length?(r=n,i):r},i.tickSize=function(n){return arguments.length?(o=p=+n,i):o},i.tickSizeInner=function(n){return arguments.length?(o=+n,i):o},i.tickSizeOuter=function(n){return arguments.length?(p=+n,i):p},i.tickPadding=function(n){return arguments.length?(g=+n,i):g},i.offset=function(n){return arguments.length?(c=+n,i):c},i}function Ae(e){return ce(U,e)}function ve(e){return ce(P,e)}const le=({min:e,max:t,dataObjectName:m,colorName:l="Rainbow",horizontal:r,getColorScaleData:o,id:p,colorTables:g=ge,colorMapFunction:c,reverseRange:f=!1,breakPoint:h,editedBreakPointValues:x,isLog:i,isNearest:n,isRangeShown:j=!0,legendFontSize:E=18,tickFontSize:F=12,numberOfTicks:_=3,legendScaleSize:s=200,forceDarkMode:I,cssLegendStyles:N={left:"0vw",top:"0vh"}})=>{const L=Math.ceil(Math.random()*9999).toString(),y=ae.useRef(null);return ae.useEffect(()=>{y.current&&(K(y.current).select("div").remove(),K(y.current).select("svg").remove(),b());async function b(){var v,k;let q=[],A;try{typeof g=="string"&&(A=await(await fetch(g)).json());let d=typeof g=="string"?Q(l,A):Q(l,g);const O=[];o&&Object.keys(o).length>0&&(o.color?d=o.color:o.arrayData&&(d=o.arrayData));const $=ie.find(a=>(a==null?void 0:a.name)===l);if($&&$.discrete===!1){const a=[],u=Q(l,ie);he(10).map(M=>({color:u(M/10)})).forEach((M,V)=>{var ee,te,ne;a.push(["0."+V,(ee=W(M.color))==null?void 0:ee.rgb().r,(te=W(M.color))==null?void 0:te.rgb().g,(ne=W(M.color))==null?void 0:ne.rgb().b])}),d=a}const X=(v=typeof g=="string"?A:g)==null?void 0:v.find(a=>o?a.name===(o==null?void 0:o.name):a.name===l),fe=d.length-1;if(n){const u=1/d.length;let R=0,M=0+u;d.forEach(V=>{O.push({breakPoint:Number(R.toFixed(2)),color:C([V[0],V[1],V[2],V[3]]).color},{breakPoint:Number(M.toFixed(2)),color:C([V[0],V[1],V[2],V[3]]).color}),R+=u,M+=u})}if(c){const a=[];for(var w=0;w<=1;w+=.05){const u=c(w);a.push([w.toFixed(2),u[0],u[1],u[2]])}d=a}const B=h==null?void 0:h.map(a=>Number(a)),z=B||[];if(d.forEach((a,u)=>{let R;z[u]?R=z[u]:R=a[0],q.push({breakPoint:(X==null?void 0:X.discrete)===!0?C(a,fe).offset:(h==null?void 0:h.length)>0?R*100:a[0]*100,color:C(a).color})}),d.length===0)return[0,0,0];((k=x==null?void 0:x.colorArray)==null?void 0:k.length)>0&&(x==null?void 0:x.customizeFlag)===!0&&(q=x.colorArray.map(function(u){return{breakPoint:u.position*100,color:u.color}})),q.sort((a,u)=>a.breakPoint-u.breakPoint);const T=K(y.current).style("margin-right","2px").style("margin-left","2px").append("svg").style("cursor",o?"pointer":"auto").style("background-color",I?"000000cc":"#ffffffcc").style("border-radius","5px"),de=T.append("defs");T.attr("width",r?s<200?200:s:"100").attr("height",r?"70":s<200?200:s-17);const S="linear-gradient-"+p+"0",Y=de.append("linearGradient").attr("id",S);r&&!f||!r&&f?Y.attr("x1","0%").attr("x2",r?"100%":"0%").attr("y1","0%").attr("y2",r?"0%":"100%"):(!r&&!f||r&&f)&&Y.attr("x1",r?"100%":"0%").attr("x2","0%").attr("y1",r?"0%":"100%").attr("y2","0%");const me=Z().domain([0,1]).range([0,400]);Y.selectAll("stop").data(O.length>0?O:q).enter().append("stop").attr("offset",function(a){return O.length>0?me(a.breakPoint)/4+"%":a.breakPoint+"%"}).attr("stop-color",function(a){return a.color}),T.append("rect").attr("x",25).attr("y",r?30:18).attr("width",r?s<200?159:s-40:20).attr("height",r?20:s<200?159:s-40).style("fill","url(#"+S+")"),T.append("text").attr("x",r?25:-168).attr("y",r?20:15).style("text-anchor","left").style("transform",r?"none":"left").style("transform",r?"none":"rotate(270deg)").style("fill","grey").style("font-size",E&&E>0?`${E}px`:"16px").text(m);const H=(i?oe():Z()).domain(f?[t,e]:[e,t]).range([10,s<200?168:s-32]),J=(i?oe():Z()).domain(f?[e,t]:[t,e]).range([10,s<200?168:s-32]),pe=ve(H).tickValues(H.ticks(0).concat(H.domain(),se(H.domain(),_))),ye=Ae(J).tickValues(J.ticks(0).concat(J.domain(),se(H.domain(),_)));j&&T.attr("class","axis").append("g").attr("transform",r?"translate(16, 50)":"translate(45, 7.5)").style("font-size",F&&F>0?`${F}px`:"12px").style("font-weight","700").call(r?pe:ye).style("height",15)}catch(d){console.error(d)}}},[e,t,l,g,r,o,c,m,p,f,i,n,j,E,F,_,s]),re("div",{style:{position:"absolute",minHeight:"70px",zIndex:999,margin:"10px",...N},children:re("div",{id:p||`cont-legend - ${L}`,ref:y})})};try{le.displayName="ContinuousLegend",le.__docgenInfo={description:"",displayName:"ContinuousLegend",props:{min:{defaultValue:null,description:"Min value",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:null,description:"Max value",name:"max",required:!1,type:{name:"number"}},dataObjectName:{defaultValue:null,description:"Title for the legend",name:"dataObjectName",required:!1,type:{name:"string"}},colorName:{defaultValue:{value:"Rainbow"},description:"Name of the color(ex: Rainbow)",name:"colorName",required:!1,type:{name:"string"}},horizontal:{defaultValue:null,description:"Orientation for legend",name:"horizontal",required:!1,type:{name:"boolean"}},getColorScaleData:{defaultValue:null,description:`Used while using color selector component

Returns the object with name and array of colors`,name:"getColorScaleData",required:!1,type:{name:"any"}},id:{defaultValue:null,description:"ID",name:"id",required:!1,type:{name:"string"}},colorTables:{defaultValue:{value:"defaultColorTables as colorTablesArray"},description:`Prop containing color table data

Reference: https://github.com/emerson-eps/color-tables/blob/main/react-app/src/component/color-tables.json`,name:"colorTables",required:!1,type:{name:"colorTablesArray"}},colorMapFunction:{defaultValue:null,description:`Optional function property

Takes a value in the range [0,1] and returns a color

If a colorMapFunction is used, then the colorTable file is not needed`,name:"colorMapFunction",required:!1,type:{name:"any"}},reverseRange:{defaultValue:{value:"false"},description:"Reverse the range(min and max)",name:"reverseRange",required:!1,type:{name:"boolean"}},isAuto:{defaultValue:null,description:"",name:"isAuto",required:!1,type:{name:"boolean"}},breakPoint:{defaultValue:null,description:"",name:"breakPoint",required:!1,type:{name:"any"}},editedBreakPointValues:{defaultValue:null,description:"",name:"editedBreakPointValues",required:!1,type:{name:"any"}},isLog:{defaultValue:null,description:"",name:"isLog",required:!1,type:{name:"boolean"}},isNearest:{defaultValue:null,description:"",name:"isNearest",required:!1,type:{name:"boolean"}},isRangeShown:{defaultValue:{value:"true"},description:"Should the range be shown or not",name:"isRangeShown",required:!1,type:{name:"boolean"}},legendFontSize:{defaultValue:{value:"18"},description:"Font size of legend name (in px)",name:"legendFontSize",required:!1,type:{name:"number"}},tickFontSize:{defaultValue:{value:"12"},description:"Font size of legend ticks (in px)",name:"tickFontSize",required:!1,type:{name:"number"}},numberOfTicks:{defaultValue:{value:"3"},description:`Number of ticks in the main legend (only shown when isRangeShown prop is true)
This refers to the number between min and max range points`,name:"numberOfTicks",required:!1,type:{name:"number"}},legendScaleSize:{defaultValue:{value:"200"},description:"This prop controls the number of ticks shown on the scale of the color legend (in px)",name:"legendScaleSize",required:!1,type:{name:"number"}},forceDarkMode:{defaultValue:null,description:"Forces darkMode if true",name:"forceDarkMode",required:!1,type:{name:"boolean"}},cssLegendStyles:{defaultValue:{value:'{ left: "0vw", top: "0vh" }'},description:"apply css styles",name:"cssLegendStyles",required:!1,type:{name:"any"}}}}}catch{}export{le as C,he as r};
//# sourceMappingURL=ContinuousLegend-016a263e.js.map
